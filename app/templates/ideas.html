{% extends "base.html" %}

{% block title %}–û—Å—Ç–∞–≤–∏—Ç—å –∏–¥–µ—é ‚Äî Yessenov University{% endblock %}
{% block header_title %}–û—Å—Ç–∞–≤–∏—Ç—å –∏–¥–µ—é{% endblock %}
{% block header_desc %}–§–æ—Ä–º–∞ –¥–ª—è –ø–æ–¥–∞—á–∏ –∏–¥–µ–∏.{% endblock %}

{% block content %}
<div class="feedback-form-card">
<form method="post" action="/ideas" class="idea-form">
  <div class="form-title">–û—Å—Ç–∞–≤–∏—Ç—å –∏–¥–µ—é</div>
  <label for="name_surname">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è <span class="hint">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>:</label>
  <input type="text" id="name_surname" name="name_surname" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
  <label for="email">Email <span class="hint">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>:</label>
  <input type="email" id="email" name="email" placeholder="you@example.com">
  <label for="subject">–¢–µ–º–∞ –∏–¥–µ–∏:</label>
  <input type="text" id="subject" name="subject" placeholder="–¢–µ–º–∞ –≤–∞—à–µ–π –∏–¥–µ–∏" required minlength="5" maxlength="100">
  <label for="message">–¢–µ–∫—Å—Ç –∏–¥–µ–∏:</label>
  <textarea id="message" name="message" rows="5" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∏–¥–µ—é..." minlength="20"></textarea>
  <button type="submit" class="btn site-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–¥–µ—é</button>
</form>
</div>

<div class="content">
<h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–¥–µ–∏</h2>
<p class="subtitle">–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ—à–µ–¥—à–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏—é –∏–¥–µ–∏.</p>
{% if ideas %}
<div class="complaints-grid">
  {% for idea in ideas %}
  <div class="feedback-card">
    <div class="feedback-header">
      <div class="feedback-author">{{ idea.name_surname or "–ê–Ω–æ–Ω–∏–º" }}</div>
      <div class="feedback-date-tag">{{ idea.created_at.strftime("%d.%m.%Y") }}</div>
      <div class="feedback-reaction-buttons">
        <button class="feedback-reaction-btn feedback-like-btn">üëç 5</button>
        <button class="feedback-reaction-btn feedback-dislike-btn">üëé 0</button>
      </div>
    </div>
    <div class="feedback-card-content">
      <div class="feedback-content-header">
        <div class="feedback-content-title">{{ idea.subject }}</div>
        <div class="feedback-content-reactions">
          <div class="feedback-content-reaction">üí¨ 0</div>
        </div>
      </div>
      <div class="feedback-content-text">{{ idea.message }}</div>
      {% if idea.admin_response %}
      <div class="feedback-response"><strong>–û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ idea.admin_response }}</div>
      {% endif %}
    </div>
    <div class="feedback-actions">
      <form method="post" action="/ideas/{{ idea.id }}/delete">
        <button type="submit" class="btn delete-btn" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∏–¥–µ—é?');"><i class="fa-solid fa-trash"></i></button>
      </form>
    </div>
  </div>
  {% endfor %}
</div>
<div class="pagination">
  {% if has_prev %}
  <a href="?page={{ current_page - 1 }}" class="btn outline">‚Üê –ù–∞–∑–∞–¥</a>
  {% endif %}
  <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ current_page }} –∏–∑ {{ total_pages }}</span>
  {% if has_next %}
  <a href="?page={{ current_page + 1 }}" class="btn outline">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
  {% endif %}
</div>
{% else %}
<div class="no-complaints-msg">–ü–æ–∫–∞ –∏–¥–µ–π –Ω–µ—Ç.</div>
{% endif %}
</div>
{% endblock %}